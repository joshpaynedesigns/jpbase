window.tribe_events_pro_admin=window.tribe_events_pro_admin||{},window.tribe_events_pro_admin.recurrence={recurrence_count:0,exclusion_count:0,event:{}},dayjs.extend(window.dayjs_plugin_isoWeek),dayjs.extend(window.dayjs_plugin_customParseFormat),function(e,t){"use strict";const r=e(document);t.init=function(){this.init_recurrence()},t.init_recurrence=function(){this.$recurrence_staging=e("#tribe-recurrence-staging"),this.recurrence_tmpl=document.getElementById("tmpl-tribe-recurrence"),this.recurrence_tmpl&&(this.recurrence_template=Handlebars.compile(this.recurrence_tmpl.innerHTML),this.$add_recurrence=e("#tribe-add-recurrence"),this.$recurrence_rules=e(".tribe-event-recurrence-rule"),this.$recurrence_row=e(".recurrence-row.tribe-datetime-block").addClass("tribe-recurrence-exclusion-row--idle"),this.$exclusion_staging=e("#tribe-exclusion-staging"),this.exclusion_tmpl=document.getElementById("tmpl-tribe-exclusion"),this.exclusion_template=Handlebars.compile(this.exclusion_tmpl.innerHTML),this.$add_exclusion=e("#tribe-add-exclusion"),this.$exclusion_rules=e(".tribe-event-recurrence-exclusion"),this.recurrence_errors={days:[],end:[]},this.date_format=tribe_datepicker_opts.dateFormat.toUpperCase(),this.date_format=this.date_format.replace("YY","YYYY"),this.populate_recurrence(tribe_events_pro_recurrence_data),window.Handlebars.registerHelper({tribe_recurrence_select(t,r){const n=e("<select />").html(r.fn(this));return t&&n.find("option:selected").attr("selected",!1),Array.isArray(t)||(t=[t]),t.forEach((function(e){n.find('[value="'+e+'"]').attr("selected","selected")})),n.html()},tribe_if_in:(t,r,n)=>(void 0===r&&(r=[]),void 0===n&&(n=""),-1!==e.inArray(t,r)?n:""),tribe_if_not_in:(t,r,n)=>(void 0===r&&(r=[]),void 0===n&&(n=""),-1===e.inArray(t,r)?n:""),tribe_checked_if_is:(e,t)=>e===t?"checked":"",tribe_checked_if_is_not:(e,t)=>e!==t?"checked":"",tribe_checked_if_in:(t,r)=>-1!==e.inArray(t,r)?"checked":""}))},t.attach_behaviors=function(){e(".eventForm").on("submit",".wp-admin.events-cal #post",this.event.submit_validation).on("change",'[data-field="type"]',this.event.recurrence_type_changed).on("change",'[data-field="end-type"]',this.event.recurrence_end_type_changed).on("change",'[data-field="custom-month-number"]',this.event.recurrence_custom_month_changed).on("change",'[data-field="same-time"]',this.event.same_time_changed).on("change",'[data-field="custom-week-day"]',this.event.weekdays_changed).on("change",".recurrence_end_count",this.event.recurrence_end_count_changed).on("change",".recurrence-row, .custom-recurrence-row",this.event.recurrence_row_changed).on("change","#EventStartDate, #EventEndDate, #allDayCheckbox, #EventStartTime, #EventEndTime",this.event.datepicker_updated).on("change","#EventStartTime, #EventEndTime, #allDayCheckbox",this.setup_same_time).on("change","#EventStartDate",this.setup_same_day).on("click","#tribe-add-recurrence",this.event.add_recurrence).on("click","#tribe-add-exclusion",this.event.add_exclusion).on("click",".tribe-event-recurrence .tribe-handle, .tribe-event-exclusion .tribe-handle",this.event.toggle_rule).on("click",".tribe-event-recurrence .tribe-confirm-delete-this, .tribe-event-exclusion .tribe-confirm-delete-this",this.event.delete_rule),e(document).on("click",".tribe-event-recurrence .tribe-delete-this, .tribe-event-exclusion .tribe-delete-this",this.event.delete_rule),e('input[data-field="is_recurring"][value="true"]').length&&(e(".eventForm").on("change",".recurrence-row input, .custom-recurrence-row input, .recurrence-row select, .custom-recurrence-row select",this.event.recurrence_changed),e(".eventForm").on("recurrenceEndChanged",'[data-field="end"]',this.event.recurrence_changed)),e('[data-field="end"]').datepicker("option","onSelect",this.event.datepicker_end_date_changed),e(".recurrence_end, #EventStartDate, #EventEndDate").datepicker("option","onClose",this.event.datepicker_updated),this.set_recurrence_end_min_date(),this.init_buttonset()},t.init_dropdowns=function(){e(".recurrence-row .tribe-dropdown").not(".tribe-dropdown-created").tribe_dropdowns()},t.init_buttonset=function(){window?.tribe_buttonset&&e(tribe_buttonset.selector.input).trigger("change.tribe_buttonset")},t.add_recurrence=function(n){const c=void 0===n;void 0!==n&&void 0!==n.end&&n.end&&(n.end=dayjs(n.end).format(this.date_format));try{n.custom.date.date&&(n.custom.date.date=dayjs(n.custom.date.date).format(this.date_format))}catch(e){}this.$recurrence_staging.append(this.recurrence_template(n));const i=this.$recurrence_staging.find(".tribe-event-recurrence");c&&i.addClass("recurrence-new-rule"),i.find('[name*="recurrence[rules][]"],[id*="recurrence_rule_--"],[data-input*="recurrence_rule_--"],[data-depends*="#recurrence_rule_--"]').each((function(){const r=e(this);r.attr("name")&&r.attr("name",r.attr("name").replace(/recurrence\[rules\]\[\]/,"recurrence[rules]["+t.recurrence_count+"]")),r.attr("id")&&r.attr("id",r.attr("id").replace(/recurrence_rule_--/,"recurrence_rule_"+t.recurrence_count)),r.attr("data-input")&&r.attr("data-input",r.attr("data-input").replace(/recurrence_rule_--/,"recurrence_rule_"+t.recurrence_count)).data("input",r.attr("data-input")),r.attr("data-depends")&&r.attr("data-depends",r.attr("data-depends").replace(/#recurrence_rule_--/,"#recurrence_rule_"+t.recurrence_count))})),n||i.find(".tribe-same-time-checkbox").prop("checked",!0),i.find(".tribe-datepicker").datepicker(tribe_datepicker_opts),i.insertBefore(this.$recurrence_staging),this.set_recurrence_end_min_date(),this.set_recurrence_data_attributes(i),this.maybe_relocate_end_date(i),this.adjust_rule_helper_text(i),this.update_rule_recurrence_text(i),this.$recurrence_rules=this.$recurrence_rules.add(i),this.recurrence_count++,this.check_for_useful_rule(),this.setup_intervals(i),this.setup_same_time(),this.setup_same_day(),this.setup_yearly_select(i),this.setup_weekly_select(i),this.init_dropdowns(),void 0===n&&this.toggle_rule(i),e("#tribe-recurrence-active.inactive").trigger("click").prop("checked",!0).removeClass("inactive"),r.trigger("verify.dependency")},t.setup_weekly_select=function(t){const r=e(document.getElementById("EventStartDate")).val(),n=dayjs(r,this.date_format).isoWeekday();t.find('[data-field="custom-week-day"]').filter(":checked").length>0||t.find('[data-field="custom-week-day"][value="'+n+'"]').each((function(){e(this).parent().trigger("click")}))},t.setup_yearly_select=function(t){const r=e(document.getElementById("EventStartDate"));let n=tribe_dynamic_help_text.datepicker_format;n=n.replace("m","MM").replace("d","DD").replace("Y","YYYY");const c=dayjs(r.val(),n).format("M"),i=t.find('[data-field="custom-year-month"]');i.val()||i.val(c)},t.setup_intervals=function(e){const t=e.find('[data-field="type"]').val(),r=e.find(".tribe-recurrence-rule-interval"),n=r.get(0);if(n.created)return;let c=1,i=6;const a=[];for("Daily"===t||"Weekly"===t?i=6:"Monthly"===t?i=12:"Yearly"===t&&(i=3),c=1;c<=i;c++)a.push({id:c,text:""+c});r.select2TEC().select2("destroy").removeClass("select2-offscreen").data("options",a),n.created=!0},t.setup_same_day=function(){e(".tribe-event-recurrence, .tribe-event-exclusion").each((function(){const r=e(this).find(".recurrence-same-day-text"),n=e(document.getElementById("EventStartDate")),c=t.convert_date_format_php_to_moment(tribe_dynamic_help_text.datepicker_format),i=dayjs(n.val(),c).format("D");r.html(tribe_events_pro_recurrence_strings.recurrence["same-day-month-"+i])}))},t.setup_same_time=function(){e(".tribe-event-recurrence, .tribe-event-exclusion").each((function(){const t=e(this),r=t.find(".recurrence-same-time-text");let n="";if(e("#allDayCheckbox:checked").length)n=tribe_events_pro_recurrence_strings.recurrence["same-time-text-same-all-day"];else{const t=e(document.getElementById("EventStartTime")),r=e(document.getElementById("EventEndTime"));n=tribe_events_pro_recurrence_strings.recurrence["same-time-text-same"].replace("%1$s",t.val()).replace("%2$s",r.val())}r.html(n);const c=t.find(".tribe-timepicker:not(.ui-timepicker-input)");tribe_timepickers.setup_timepickers(c)}))},t.maybe_relocate_end_date=function(e){const t=e.find(".recurrence-custom-container"),r=e.find(".recurrence-end-container"),n=e.find(".recurrence_end");"Date"===e.find('[data-field="type"]').data("value")?t.append(n):r.append(n)},t.check_for_useful_rule=function(){const t=this.$recurrence_rules.filter(":first");let r=!1;this.$recurrence_rules.find('[data-field="type"]').each((function(){"None"!==e(this).data("value")&&(r=!0)})),r?t.closest("table").addClass("tribe-has-recurrence-rule"):t.closest("table").removeClass("tribe-has-recurrence-rule")},t.add_exclusion=function(r){const n=void 0===r;if(void 0!==r&&void 0!==r.end&&r.end){const e=t.convert_date_format_php_to_moment(tribe_datepicker_opts.dateFormat);r.end=dayjs(r.end).format(e)}this.$exclusion_staging.append(this.exclusion_template(r));const c=this.$exclusion_staging.find(".tribe-event-exclusion");n&&c.addClass("exclusion-new-rule"),c.find('[name*="recurrence[exclusions][]"],[id*="exclusion_rule_--"],[data-input*="exclusion_rule_--"],[data-depends*="#exclusion_rule_--"]').each((function(){const r=e(this);r.attr("name")&&r.attr("name",r.attr("name").replace(/recurrence\[exclusions\]\[\]/,"recurrence[exclusions]["+t.exclusion_count+"]")),r.attr("id")&&r.attr("id",r.attr("id").replace(/exclusion_rule_--/,"exclusion_rule_"+t.exclusion_count)),r.attr("data-input")&&r.attr("data-input",r.attr("data-input").replace(/exclusion_rule_--/,"exclusion_rule_"+t.exclusion_count)).data("input",r.attr("data-input")),r.attr("data-depends")&&r.attr("data-depends",r.attr("data-depends").replace(/#exclusion_rule_--/,"#exclusion_rule_"+t.exclusion_count))})),r||c.find(".tribe-same-time-checkbox").prop("checked",!0),c.find(".tribe-datepicker").datepicker(tribe_datepicker_opts),c.insertBefore(this.$exclusion_staging),this.set_recurrence_end_min_date(),this.set_recurrence_data_attributes(c),this.maybe_relocate_end_date(c),this.adjust_rule_helper_text(c),this.update_rule_recurrence_text(c),this.$exclusion_rules=this.$exclusion_rules.add(c),this.exclusion_count++,this.check_for_useful_rule(),this.setup_intervals(c),this.setup_same_time(),this.setup_same_day(),this.setup_yearly_select(c),this.setup_weekly_select(c),this.init_dropdowns(),void 0===r&&this.toggle_rule(c)},t.populate_recurrence=function(e){t.operations_completed=0,t.total_operations=0,void 0!==e.rules&&e.rules.length?(t.total_operations=1,t.async_operation((function(e,r){t.add_recurrence(e),r()}),e.rules,(function(){t.operations_completed+=1,t.populate_completed()})),void 0!==e.exclusions&&e.exclusions.length&&(t.total_operations+=1,t.async_operation((function(e,r){t.add_exclusion(e),r()}),e.exclusions,(function(){t.operations_completed+=1,t.populate_completed()})))):t.populate_completed()},t.populate_completed=function(){t.operations_completed===t.total_operations&&setTimeout((function(){t.attach_behaviors(),r.trigger("setup.dependency"),t.$recurrence_row.removeClass("tribe-recurrence-exclusion-row--idle")}))},t.async_operation=function(e,r,n,c){const i=c||0;i>=r.length?setTimeout(n):setTimeout((function(){e(r[i],(function(){t.async_operation(e,r,n,i+1)}))}))},t.adjust_rule_helper_text=function(e){const t=e.find('[data-field="custom-type"] option:selected');e.find(".recurrence-interval-type").text(t.data("plural")),e.find('[data-field="custom-type-text"]').val(t.data("plural"))},t.set_recurrence_data_attributes=function(t){(t||this.$recurrence_rules).each((function(){const t=e(this);let r=null;const n=["is_recurring","type","end-type","custom-type","custom-month-number"];for(const e in n)r=t.find('[data-field="'+n[e]+'"]'),"custom-month-number"===n[e]?t.attr("data-recurrence-"+n[e],isNaN(r.val())?"string":"numeric"):"custom-month-number"===n[e]?t.attr("data-recurrence-"+n[e],r.is(":checked")?"yes":"no"):t.attr("data-recurrence-"+n[e],r.val());let c=null;switch(t.find('[data-field="custom-type"]').val()){case"Weekly":c="week";break;case"Monthly":c="month";break;case"Yearly":c="year";break;default:c="day"}const i=t.find('[data-field="custom-'+c+'-same-time"]');t.attr("data-recurrence-same-time",i.filter(":checked").length?"yes":"no")}))},t.set_recurrence_end_min_date=function(){const t=e("#EventStartDate").val();""!==t&&e(".recurrence_end").attr("placeholder",t).datepicker("option","minDate",t)},t.has_valid_recurrence_days=function(){let r=!0;return this.$recurrence_rules.each((function(n){t.has_valid_recurrence_days_for_rule(e(this))||(r=!1,t.recurrence_errors.days.push(n))})),r},t.has_valid_recurrence_days_for_rule=function(e){const t=e.find('[data-field="custom-interval"]'),r=e.find('[data-field="type"]');return t.val()===parseInt(t.val(),10)||"Custom"!==r.val()},t.has_valid_recurrence_ends=function(){let r=!0;return this.$recurrence_rules.each((function(n){t.has_valid_recurrence_end_for_rule(e(this))||(r=!1,t.recurrence_errors.end.push(n))})),r},t.has_valid_recurrence_end_for_rule=function(e){const t=e.find('[data-field="end"]'),r=e.find('[data-field="end-type"]');return"None"===e.find('[data-field="type"]').val()||"On"!==r.val()||t.val()&&!t.hasClass("placeholder")},t.reset_submit_button=function(){e("#publishing-action .button-primary-disabled").removeClass("button-primary-disabled"),e("#publishing-action .spinner").hide()},t.validate_recurrence=function(){let r=!0;return this.has_valid_recurrence_days()||(r=!1,alert(e(".rec-days-error:first").text()),e(".rec-days-error").each((function(r){e.inArray(r,t.recurrence_errors.days)&&e(this).show()}))),this.has_valid_recurrence_ends()||(r=!1,alert(e(".rec-end-error:first").text()),e(".rec-end-error").each((function(r){e.inArray(r,t.recurrence_errors.end)&&e(this).show()}))),r},t.toggle_rule=function(e,t){"undefined"!==t&&t?"open"===t?e.addClass("tribe-open"):e.removeClass("tribe-open"):e.toggleClass("tribe-open")},t.update_recurrence_text=function(){this.$recurrence_rules.each((function(){t.update_rule_recurrence_text(e(this))})),this.$exclusion_rules.each((function(){t.update_rule_recurrence_text(e(this))}))},t.convert_date_format_php_to_moment=function(e){const t={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"};return e.split("").map((function(e){return e in t?t[e]:e})).join("")},t.update_rule_recurrence_text=function(t){let r=t.find('[data-field="type"]').val(),n=t.find('[data-field="end-type"] option:selected').val(),c=t.find('[data-field="end-count"]').val();const i="yes"===t.find('[data-field="same-time"]').val(),a=t.find('[data-field="custom-interval"]').val(),s=e(document.getElementById("allDayCheckbox")).prop("checked");if(c||(c=0),r=r.toLowerCase().replace(" ","-"),n=n.toLowerCase().replace(" ","-"),"none"===r||""===r)return void t.find(".tribe-event-recurrence-description").html("");const o=this.date_format+" hh:mm a";let d=e(document.getElementById("EventStartDate")).val();const u=e(document.getElementById("EventStartTime")).val().toUpperCase();d+=" "+u;let l=e(document.getElementById("EventEndDate")).val();l+=" "+e(document.getElementById("EventEndTime")).val().toUpperCase();const p=dayjs(d,o),h=dayjs(l,o);var m=p;const f=i?u:t.find(".tribe-field-start_time").val();let v=null,b=null,g=tribe_events_pro_recurrence_strings.date.day_placeholder,y=p.format("D"),x=r;if(s&&!p.isSame(h,"day")?x+="-multi":s&&i&&(x+="-allday"),"weekly"===r){const r=[];t.find('[data-field="custom-week-day"]:checked').each((function(){r.push(tribe_events_pro_recurrence_strings.date.weekdays[parseInt(e(this).val(),10)-1])})),0===r.length?v=tribe_events_pro_recurrence_strings.date.day_placeholder:2===r.length?v=r.join(" "+tribe_events_pro_recurrence_strings.date.collection_joiner+" "):(v=r.join(", "),v=v.replace(/(.*),/,"$1, "+tribe_events_pro_recurrence_strings.date.collection_joiner))}else if("monthly"===r){var w=t.find('[data-field="month-same-day"] option:selected').val(),k=t.find('[data-field="custom-month-number"] option:selected').val(),E=t.find('[data-field="custom-month-day"] option:selected').val();"yes"!==w&&isNaN(k)?(y=k,g=tribe_events_pro_recurrence_strings.date[k.toLowerCase()+"_x"],g=g.replace("%1$s",tribe_events_pro_recurrence_strings.date.weekdays[parseInt(E,10)-1])):(k=y,x+="-numeric")}else if("yearly"===r){w=t.find('[data-field="year-same-day"] option:selected').val(),k=t.find('[data-field="custom-year-month-number"]').val(),E=t.find('[data-field="custom-year-month-day"]').val();const r=[];let n=t.find('[data-field="custom-year-month"]').val();n&&(_.isString(n)&&(n=n.split(",")),e.each(n,(function(e,t){r.push(tribe_events_pro_recurrence_strings.date.months[parseInt(t,10)-1])}))),0===r.length?b=tribe_events_pro_recurrence_strings.date.month_placeholder:2===r.length?b=r.join(" "+tribe_events_pro_recurrence_strings.date.collection_joiner+" "):(b=r.join(", "),b=b.replace(/(.*),/,"$1, "+tribe_events_pro_recurrence_strings.date.collection_joiner)),"yes"!==w&&isNaN(k)?(y=k,g=tribe_events_pro_recurrence_strings.date[k.toLowerCase()+"_x"],g=g.replace("%1$s",tribe_events_pro_recurrence_strings.date.weekdays[parseInt(E,10)-1])):(k=y,x+="-numeric")}else if("date"===r){const e=t.find("input.tribe-datepicker").val();if(!e)return void t.find(".tribe-event-recurrence-description").html("");m=dayjs(e,this.date_format)}x+="date"===r?"-on":"after"===n?"-after":"never"===n?"-never":"-on",s&&!i&&(x+="-at"),void 0===tribe_events_pro_recurrence_strings.recurrence[x]&&x.endsWith("-at")&&(x=x.replace(/-at$/,""));let C=tribe_events_pro_recurrence_strings.recurrence[x];if(void 0===C)return void t.find(".tribe-event-recurrence-description").html("");let D=dayjs(t.find('[data-field="end"]').val(),this.date_format);D||(D=t.find('[data-field="end"]').attr("placeholder")),dayjs.locale(document.documentElement.getAttribute("lang"));const $=dayjs(D,o),j=this.convert_date_format_php_to_moment(tribe_dynamic_help_text.date_with_year);C=C.replace("[count]",c),C=C.replace("[day_number]",y),C=C.replace("[days_of_week]",v),C=C.replace("[month_day_description]",g),C=C.replace("[month_names]",b),C=C.replace("[month_number]",k),C=C.replace("[interval]",a),C=C.replace("[series_end_date]",$.format(j)),C=C.replace("[start_date]",p.format(j)),C=C.replace("[start_time]",f),C=C.replace("[single_date]",m.format(j)),C=C.replace("1 day(s)",tribe_events_pro_recurrence_strings.date.time_spans.day),C=C.replace("1 week(s)",tribe_events_pro_recurrence_strings.date.time_spans.week),C=C.replace("1 month(s)",tribe_events_pro_recurrence_strings.date.time_spans.month),C=C.replace("1 year(s)",tribe_events_pro_recurrence_strings.date.time_spans.year),C=C.replace("day(s)",tribe_events_pro_recurrence_strings.date.time_spans.days),C=C.replace("week(s)",tribe_events_pro_recurrence_strings.date.time_spans.weeks),C=C.replace("month(s)",tribe_events_pro_recurrence_strings.date.time_spans.months),C=C.replace("year(s)",tribe_events_pro_recurrence_strings.date.time_spans.years),t.find(".tribe-event-recurrence-description").html(C)},t.event.add_recurrence=function(e){e.preventDefault(),t.add_recurrence()},t.event.add_exclusion=function(e){e.preventDefault(),t.add_exclusion()},t.event.recurrence_type_changed=function(){const r=e(this),n=r.closest(".tribe-event-recurrence, .tribe-event-exclusion"),c=n.find(".occurrence-count-text");let i=parseInt(n.find(".recurrence_end_count").val(),10),a=r.data("plural");n.find(".recurrence_end_count").val(i),(isNaN(i)||0>=i)&&(n.find(".recurrence_end_count").val(1),i=1),1===i&&(a=r.data("single")),c.text(a),n.find('[data-field="occurrence-count-text"]').val(c.text()),t.set_recurrence_data_attributes(n),t.maybe_relocate_end_date(n),t.check_for_useful_rule(),t.setup_intervals(n),t.setup_yearly_select(n),t.setup_weekly_select(n),t.init_dropdowns(),r.closest(".tribe-buttonset").parent().find(".tribe-dependent:not(.tribe-dependency)").dependency(),t.toggle_rule(n,"open")},t.event.recurrence_end_type_changed=function(){const r=e(this).closest(".tribe-event-recurrence");t.set_recurrence_data_attributes(r)},t.event.recurrence_changed=function(){const r=e(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");r.attr("data-recurrence-changed","yes"),t.toggle_rule(r,"open")},t.event.recurrence_end_count_changed=function(){e(this).closest(".tribe-event-recurrence, .tribe-event-exclusion").find('[data-field="type"]').change()},t.event.recurrence_custom_month_changed=function(){const r=e(this).closest(".tribe-event-recurrence");t.set_recurrence_data_attributes(r)},t.event.submit_validation=function(e){if(!window.tribe_events_pro_admin.validate_recurrence())return e.preventDefault(),e.stopPropagation(),t.reset_submit_button(),!1},t.event.datepicker_updated=function(){window.tribe_events_pro_admin.recurrence.update_recurrence_text(),window.tribe_events_pro_admin.recurrence.set_recurrence_end_min_date()},t.event.datepicker_end_date_changed=function(){e(this).removeClass("placeholder"),e(this).trigger("recurrence-end-changed.tribe")},t.event.recurrence_row_changed=function(){const t=e(".recurrence-pattern-description-row");t.is(":visible")||t.show(),window.tribe_events_pro_admin.recurrence.update_recurrence_text()},t.event.same_time_changed=function(){const r=e(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");t.set_recurrence_data_attributes(r)},t.event.weekdays_changed=function(){const r=e(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");t.set_recurrence_data_attributes(r),t.update_rule_recurrence_text(r)},t.event.toggle_rule=function(){const r=e(this);t.toggle_rule(r.closest(".tribe-event-recurrence, .tribe-event-exclusion"))},t.event.delete_rule=function(n){n.preventDefault();const c=e(this).closest(".tribe-event-recurrence, .tribe-event-exclusion"),i=tribe_events_pro_recurrence_strings.recurrence["delete-confirm"],a=tribe_events_pro_recurrence_strings.recurrence["delete-cancel"],s={delete:{text:i,click(){e(this).dialog("close"),c.fadeOut(500,(function(){c.remove(),window.tribe_events_pro_admin.recurrence.update_recurrence_text()}))}},cancel:{text:a,click(){t.event.close_delete_confirmation_dialog(e(this))}}},o=e("#tribe-row-delete-dialog");c.is(".tribe-event-recurrence")?o.addClass("rule-dialog").removeClass("exclusion-dialog"):o.addClass("exclusion-dialog").removeClass("rule-dialog"),e(".delete-dialog-open").length&&t.event.close_delete_confirmation_dialog(o),o.dialog({dialogClass:"tribe-row-delete-dialog",closeOnEscape:!0,resizable:!1,height:c[0].offsetHeight,width:c[0].offsetWidth,buttons:s,position:{my:"center",at:"center",of:c},open(){const r=e(".tribe-row-delete-dialog"),n=r.find(".ui-dialog-buttonset button"),i=r.find(".ui-dialog-content");c.fadeTo(100,.1),i.css({height:"auto","min-height":"1.5rem"}),e(n[0]).removeClass().addClass("button button-red"),e(n[1]).removeClass().addClass("button button-secondary"),c.addClass("delete-dialog-open"),e("body").on("click",t.event.close_dialogs),e(window).on("resize",t.event.close_dialogs)},close(){c.removeClass("delete-dialog-open"),c.fadeTo(100,1),e("body").off("click",t.event.close_dialogs),e(window).off("resize",t.event.close_dialogs),setTimeout((function(){r.trigger("verify.dependency")}),1e3)}})},t.event.close_delete_confirmation_dialog=function(e){e&&e.dialog("isOpen")&&e.dialog("close")},t.event.close_dialogs=function(r){const n=e("#tribe-row-delete-dialog");n.length&&n.dialog("isOpen")&&!e(r.target).is(".ui-dialog, a")&&!e(r.target).closest(".ui-dialog").length&&(r.preventDefault(),r.stopPropagation(),t.event.close_delete_confirmation_dialog(n))},e((function(){t.init()}))}(jQuery,window.tribe_events_pro_admin.recurrence),window.tec=window.tec||{},window.tec.eventsPro=window.tec.eventsPro||{},window.tec.eventsPro.eventsRecurrence={};