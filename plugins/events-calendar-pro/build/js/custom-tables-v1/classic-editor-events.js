window.tec=window.tec||{},tec.classicEditorEvents=tec.classicEditorEvents||{},dayjs.extend(window.dayjs_plugin_customParseFormat),function(e,t){"use strict";const n=e(document);t.selectors={postForm:"form#post",recurrenceActive:"#tribe-recurrence-active",addExclusion:"#tribe-add-exclusion",addRecurrence:"#tribe-add-recurrence",eventTable:"#EventInfo .eventtable, .tribe-section-datetime.eventForm",eventForm:".eventForm",eventStartDate:"#EventStartDate",eventEndDate:"#EventEndDate",eventStartTime:"#EventStartTime",eventEndTime:"#EventEndTime",allDayCheckbox:"#allDayCheckbox",saveButton:'input[name="save"]',publishButton:'input[name="publish"]',communityEventsSubmit:".events-community-submit",deleteButton:"#delete-action a.submitdelete",recurrence:".tribe-event-recurrence",exclusion:".tribe-event-exclusion",recurrenceTypeButton:".tribe-event-recurrence-rule > .tribe-buttonset .tribe-button-field[data-value]"},t.setNewRecurrenceDefaults=function(){requestAnimationFrame((function(){const e=document.querySelectorAll(t.selectors.recurrence+":not([data-defaults-set])");t.default.setRuleEndsText(e),t.default.setNewEndsOnDefault(e),t.default.setNewEndDateDefault(e),t.default.setNewEndCountDefault(e),t.default.setNewOnceTimeSelectDefault(e),t.default.setNewRuleType(e),t.default.addSameTimeRowClass(e),t.offStart.initNewRules(e),t.default.bindRuleEvents(e),t.dayOfMonth.bindRuleEvents(e),t.default.setDefaultsSetFlag(e)}))},t.setNewExclusionDefaults=function(){requestAnimationFrame((function(){const e=document.querySelectorAll(t.selectors.exclusion+":not([data-defaults-set])");t.default.hideExclusionDescription(e),t.default.setExclusionDatepickerMinDates(e),t.default.setNewEndsOnDefault(e),t.default.setRuleEndsText(e),t.default.setNewEndCountDefault(e),t.default.setNewRuleType(e),t.offStart.initNewRules(e),t.default.bindRuleEvents(e),t.dayOfMonth.bindRuleEvents(e),t.default.setDefaultsSetFlag(e)}))},t.setAllExclusionDatepickerMinDates=function(){requestAnimationFrame((function(){const e=document.querySelectorAll(t.selectors.exclusion);t.default.setExclusionDatepickerMinDates(e)}))},t.initExistingRecurrenceExclusionRows=function(){tec.classicEditorEvents.eventDate.setCurrentEventDate();const e=document.querySelectorAll(t.selectors.recurrence+":not([data-defaults-set])"),n=document.querySelectorAll(t.selectors.exclusion+":not([data-defaults-set])");t.default.hideExclusionDescription(n),t.default.setRuleEndsText(e),t.default.setRuleEndsText(n),t.default.setExclusionDatepickerMinDates(n),t.default.addSameTimeRowClass(e),t.offStart.initOffStartRules(e),t.default.setRuleTypeDropdownToMatchButtons(e),t.default.setRuleTypeDropdownToMatchButtons(n),t.default.bindRuleEvents(e),t.default.bindRuleEvents(n),t.default.setDefaultsSetFlag(e),t.default.setDefaultsSetFlag(n),t.dayOfMonth.bindRuleEvents(e),t.dayOfMonth.bindRuleEvents(n),t.sync.syncRecurrenceState(),tec.classicEditorEvents.eventDate.setPreviousEventDate()},t.handleMutations=function(e,n){e.reduce((function(e,t){return e||"attributes"!==t.type||!("class"!==t.attributeName||!t.target.classList.contains("tribe-event-recurrence")&&!t.target.classList.contains("tribe-event-exclusion"))}),!1)&&requestAnimationFrame((function(){tec.classicEditorEvents.eventDate.setCurrentEventDate(),t.sync.syncRecurrenceState(),tec.classicEditorEvents.eventDate.setPreviousEventDate()}))},t.setupMutationObserver=function(){const e=document.querySelector(t.selectors.eventTable);e&&new MutationObserver(t.handleMutations).observe(e,{subtree:!0,childList:!0,attributes:!0})},t.bindEvents=function(){e([t.selectors.recurrenceActive,t.selectors.addRecurrence].join()).on("click",t.setNewRecurrenceDefaults),e(t.selectors.addExclusion).on("click",t.setNewExclusionDefaults),e(t.selectors.eventForm).on("change",[t.selectors.eventStartDate,t.selectors.eventEndDate,t.selectors.eventStartTime,t.selectors.eventEndTime,t.selectors.allDayCheckbox].join(),t.setAllExclusionDatepickerMinDates),e(t.selectors.postForm).on("submit",t.offStart.enableOffStartFieldsForSubmission)},t.updateRuleRecurrenceText=function(e){let s;if(t.classicUpdateRuleRecurrenceText(e),Array.isArray(tecEventDetails.occurrence)||!tecEventDetails.occurrence.has_recurrence||tecEventDetails.occurrence.isFirst){const e=tribe_events_pro_admin.recurrence.date_format+" hh:mmA",r=n.find(t.selectors.eventStartDate),c=n.find(t.selectors.eventStartTime),a=r.val()+" "+c.val().toUpperCase();s=dayjs(a,e)}else s=dayjs(tecEventDetails.event.start_date,tribe_events_pro_admin.recurrence.date_format);const r=tribe_events_pro_admin.recurrence.convert_date_format_php_to_moment(tribe_dynamic_help_text.date_with_year),c=e.find(".tribe-event-recurrence-description");let a=c.text().replace("[first_occurrence_date]",s.format(r));a=a.replace("[first_occurrence_start_time]",s.format("h:mma").toUpperCase()),c.html(a)},t.setupRecurrenceTextModification=function(){t.classicUpdateRuleRecurrenceText=tribe_events_pro_admin.recurrence.update_rule_recurrence_text,tribe_events_pro_admin.recurrence.update_rule_recurrence_text=t.updateRuleRecurrenceText,t.date_format=tribe_events_pro_admin.recurrence.date_format,t.convert_date_format_php_to_moment=tribe_events_pro_admin.recurrence.convert_date_format_php_to_moment},t.ready=function(){const e=new Event("TECClassicEditorEventsBeforeReady");e.object=t,document.dispatchEvent(e),n.on("setup.dependency",(function(){t.initExistingRecurrenceExclusionRows(),t.setupMutationObserver(),t.bindEvents();const e=new Event("TECClassicEditorEventsReady");e.object=t,document.dispatchEvent(e)})),t.setupRecurrenceTextModification()},e(t.ready)}(jQuery,tec.classicEditorEvents),window.tec=window.tec||{},window.tec.eventsPro=window.tec.eventsPro||{},window.tec.eventsPro.customTablesV1=window.tec.eventsPro.customTablesV1||{},window.tec.eventsPro.customTablesV1.classicEditorEvents={};