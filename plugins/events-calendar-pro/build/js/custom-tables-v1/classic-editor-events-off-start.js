window.tec=window.tec||{},tec.classicEditorEvents=tec.classicEditorEvents||{},tec.classicEditorEvents.offStart=tec.classicEditorEvents.offStart||{},function(e,t){"use strict";t.selectors={disabledOffStartFields:['[data-is-off-start="1"] .tribe-active select[disabled][data-field="end-type"]','[data-is-off-start="1"] .tribe-active input[disabled][data-field="end-count"]','[data-is-off-start="1"] .tribe-active input[disabled][data-field="end"]'],monthlySameDaySelect:".custom-recurrence-months .tribe-same-day-select",recurrenceEnd:".recurrence_end",recurrenceEndCount:".recurrence_end_count",recurrenceEndDay:".recurrence-time select",recurrenceEndTime:".recurrence-time .tribe-field-end_time",recurrenceEndType:".recurrence-end-range select",recurrenceMonthOnTheDaySelect:".recurrence-month-on-the > span > select",recurrenceMonthOnTheNumberSelect:".recurrence-month-on-the > select",recurrenceMonthOnTheSelect:".recurrence-month-on-the select",recurrenceRuleInterval:".tribe-recurrence-rule-interval",recurrenceSameTimeSelect:".tribe-same-time-select",recurrenceStartTime:".recurrence-time .tribe-field-start_time",recurrenceYearMonths:".custom-recurrence-years",recurrenceYearOnTheDaySelect:".tribe-dame-day-select > span > span > select",recurrenceYearOnTheNumberSelect:".tribe-dame-day-select > span > select",recurrenceYearOnTheSelect:".tribe-dame-day-select select",recurrenceWeekDayInput:".custom-recurrence-weeks .tribe-button-field .tribe-button-input",recurrenceYears:".custom-recurrence-years",ruleTypeDropdown:"select.tec-events-pro-rule-type__dropdown",sameDaySelect:".tribe-same-day-select",yearlySameDaySelect:'[data-condition="Yearly"] .tribe-same-day-select'},t.classes={dropdownOption:"tec-events-pro-rule-type__dropdown-option",dropdownOptionCustom:"tec-events-pro-rule-type__dropdown-option--custom"},t.setRuleOffStart=function(e,t){e.setAttribute("data-is-off-start",t)},t.isRuleOffStart=function(e){return"1"===e.getAttribute("data-is-off-start")},t.disableAllFields=function(r){const c=e(r);[t.selectors.recurrenceEnd,t.selectors.recurrenceEndCount,t.selectors.recurrenceEndDay,t.selectors.recurrenceEndTime,t.selectors.recurrenceEndType,t.selectors.recurrenceMonthOnTheSelect,t.selectors.recurrenceRuleInterval,t.selectors.recurrenceSameTimeSelect,t.selectors.recurrenceStartTime,t.selectors.recurrenceYearOnTheSelect,t.selectors.recurrenceYears,t.selectors.sameDaySelect].forEach((function(e){c.find(e).prop("disabled",!0)}))},t.setWeekDay=function(e,t){const r=e.classList.contains("tribe-active");t&&r||!t&&!r||e.click()},t.selectWeekDays=function(e,r){e.querySelectorAll(t.selectors.recurrenceWeekDayInput).forEach((function(e){const c=r.includes(e.value),n=e.parentNode;t.setWeekDay(n,c)}))},t.isYearMonthsSame=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;const r=e.length;for(let c=0;c<r;c++)if(e[c]!==t[c])return!1;return!0},t.setFieldValueIfDifferent=function(e,t,r){e.length&&e.val()!==t&&(e.val(t),r&&e.trigger(r))},t.setWeeklyFieldValuesFromData=function(e,r){r.custom.week&&r.custom.week.day&&t.selectWeekDays(e,r.custom.week.day)},t.setMonthlyFieldValuesFromData=function(r,c){const n=e(r);c.custom.month&&c.custom.month["same-day"]&&t.setFieldValueIfDifferent(n.find(t.selectors.monthlySameDaySelect),c.custom.month["same-day"],"change"),c.custom.month&&c.custom.month.number&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceMonthOnTheNumberSelect),c.custom.month.number,"change"),c.custom.month&&c.custom.month.day&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceMonthOnTheDaySelect),c.custom.month.day,"change")},t.setYearlyFieldValuesFromData=function(r,c){const n=e(r);if(c.custom.year&&c.custom.year.month){const e=n.find(t.selectors.recurrenceYearMonths);t.isYearMonthsSame(e.val(),c.custom.year.month)||e.val(c.custom.year.month).trigger("change")}c.custom.year&&c.custom.year["same-day"]&&t.setFieldValueIfDifferent(n.find(t.selectors.yearlySameDaySelect),c.custom.year["same-day"],"change"),c.custom.year&&c.custom.year.number&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceYearOnTheNumberSelect),c.custom.year.number,"change"),c.custom.year&&c.custom.year.day&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceYearOnTheDaySelect),c.custom.year.day,"change")},t.setCommonRecurrenceFieldValuesFromData=function(r,c){const n=e(r);c.custom.interval&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceRuleInterval),c.custom.interval,"change"),c.custom["same-time"]&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceSameTimeSelect),c.custom["same-time"],"change"),c.custom["start-time"]&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceStartTime),c.custom["start-time"],!1),c.custom["end-time"]&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceEndTime),c.custom["end-time"],!1),c.custom["end-day"]&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceEndDay),c.custom["end-day"],"change"),c["end-type"]&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceEndType),c["end-type"],"change"),c["end-count"]&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceEndCount),c["end-count"],!1),c.end&&t.setFieldValueIfDifferent(n.find(t.selectors.recurrenceEnd),c.end,!1)},t.setFieldValuesFromData=function(e,r){const c=e.getAttribute("data-off-start-index");if(!c)return;let n;if("recurrence"===r?n=tribe_events_pro_recurrence_data.rules[c]:"exclusion"===r&&(n=tribe_events_pro_recurrence_data.exclusions[c]),!n)return;const s=n.custom.type;if(s)switch(s){case"Weekly":t.setWeeklyFieldValuesFromData(e,n),t.setCommonRecurrenceFieldValuesFromData(e,n);break;case"Monthly":t.setMonthlyFieldValuesFromData(e,n),t.setCommonRecurrenceFieldValuesFromData(e,n);break;case"Yearly":t.setYearlyFieldValuesFromData(e,n),t.setCommonRecurrenceFieldValuesFromData(e,n)}},t.syncOffStartRuleState=function(e){document.querySelectorAll(".tribe-event-"+e).forEach((function(r){t.isRuleOffStart(r)&&(t.setFieldValuesFromData(r,e),t.disableAllFields(r))}))},t.setRuleOffStartFromSelectedOption=function(e,r){const c=t.isRuleOffStart(e),n=r.classList.contains(t.classes.dropdownOptionCustom);c&&!n?t.setRuleOffStart(e,"0"):!c&&n&&t.setRuleOffStart(e,"1")},t.initNewRules=function(e){e.forEach((function(e){t.setRuleOffStart(e,"0")}))},t.initOffStartRules=function(r){r.forEach((function(r,c){const n=r.classList.contains(tec.classicEditorEvents.selectors.recurrence.replace(".",""))?tribe_events_pro_recurrence_data.rules[c]:tribe_events_pro_recurrence_data.exclusions[c],s=e(r).find(t.selectors.ruleTypeDropdown);if(!n||!n.isOffStart)return t.setRuleOffStart(r,"0"),void s.select2TEC();r.setAttribute("data-off-start-index",c),t.setRuleOffStart(r,"1");const a=new Option(tribe_events_pro_recurrence_strings.customTablesV1.ruleTypes.custom[n.custom.type],n.custom.type,!1,!0);a.classList.add(t.classes.dropdownOption),a.classList.add(t.classes.dropdownOptionCustom),s.append(a).trigger("change"),s.select2TEC()}))},t.enableOffStartFieldsForSubmission=function(){e(t.selectors.disabledOffStartFields.join(",")).removeAttr("disabled")}}(jQuery,tec.classicEditorEvents.offStart),window.tec=window.tec||{},window.tec.eventsPro=window.tec.eventsPro||{},window.tec.eventsPro.customTablesV1=window.tec.eventsPro.customTablesV1||{},window.tec.eventsPro.customTablesV1.classicEditorEventsOffStart={};