Object.prototype.hasOwnProperty.call(window,"tribe_ev")&&(tribe_ev.geoloc={map:[],geocoder:[],geocodes:[],bounds:[],markers:[],refine:!1}),function(e,t,r,o,i,n,a,s,l){r.extend(tribe_ev.fn,{has_address(e,t){for(let r=0;r<t.length;r++)if(t[r].formatted_address==e)return!0;return!1},pre_ajax(e){if(r("#tribe-bar-geoloc").length){const t=r("#tribe-bar-geoloc").val();t.length?i.process_geocoding(t,(function(o){if(n.geocodes=o,n.geocodes.length>1&&!i.has_address(t,n.geocodes))i.print_geo_options();else{const t=o[0].geometry.location.lat(),i=o[0].geometry.location.lng();t&&r("#tribe-bar-geoloc-lat").val(t),i&&r("#tribe-bar-geoloc-lng").val(i),e&&"function"==typeof e&&(r("#tribe_events_filter_item_geofence").length&&r("#tribe_events_filter_item_geofence").show(),e())}})):(r("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""),e&&"function"==typeof e&&(r("#tribe_events_filter_item_geofence").length&&(r("#tribe_events_filter_item_geofence input").prop("checked",!1),r("#tribe_events_filter_item_geofence").hide().find("select").prop("selectedIndex",0)),e()))}else e&&"function"==typeof e&&e()},print_geo_options(){r("#tribe-geo-links").empty(),r("#tribe-geo-options").show();const e=[];n.refine=!0;for(let t=0;t<n.geocodes.length;t++){const o=n.geocodes[t].formatted_address;e[o]||(e[o]=!0,r("<a/>").text(o).attr("href","#").addClass("tribe-geo-option-link").data("index",t).appendTo("#tribe-geo-links"),s.map_view()&&i.map_add_marker(n.geocodes[t].geometry.location.lat(),n.geocodes[t].geometry.location.lng(),o))}n.refine=!1},pro_tooltips(){const e=r("#tribe-events"),t=r("body"),o=e.hasClass("view-week")||t.hasClass("tribe-events-week");e.on("mouseenter",'div[id*="tribe-events-event-"], div[id*="tribe-events-daynum-"]:has(a), div.event-is-recurring',(function(){let e=0;const t=r(this);if(o&&t.tribe_has_attr("data-tribejson"))if(t.parents(".tribe-grid-allday").length)(i=t.find(".tribe-events-tooltip")).length||(n=t.data("tribejson"),a=t.hasClass("tribe-event-featured")?"tribe_tmpl_tooltip_featured":"tribe_tmpl_tooltip",t.append(tribe_tmpl(a,n)),i=t.find(".tribe-events-tooltip")),e=t.outerHeight()+6,i.css("bottom",e).show();else{var i;if(!(i=t.find(".tribe-events-tooltip")).length){var n=t.data("tribejson"),a=t.hasClass("tribe-event-featured")?"tribe_tmpl_tooltip_featured":"tribe_tmpl_tooltip";t.append(tribe_tmpl(a,n)),i=t.find(".tribe-events-tooltip")}const e=r(".tribe-week-grid-wrapper .scroller-content"),o=t.parent(),s=o.parent(),l=Math.ceil(s.width()),c=Math.ceil(t.width());let g=Math.ceil(i.outerWidth());const d=e.height(),b=e.scrollTop(),p=o.position(),_=t.position();let u=b-Math.ceil(_.top);const v=o.hasClass("tribe-events-right");let f,h,m,w={};i.hasClass("hovered")||i.data("ow",g).addClass("hovered"),f=v?Math.ceil(p.left)-20:l-c-Math.ceil(p.left),g=g>=f||i.data("ow")>f?f:i.data("ow"),w=v?{right:c+20,bottom:"auto",width:g+"px"}:{left:c+20,bottom:"auto",width:g+"px"},i.css(w),h=i.height(),u>=0?u+=5:(m=u+d,u=h>m?m-h-8:5),i.css("top",u).show()}}))},process_geocoding(e,t){const r={address:e,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(TribeEventsPro.geocenter.min_lat,TribeEventsPro.geocenter.min_lng),new google.maps.LatLng(TribeEventsPro.geocenter.max_lat,TribeEventsPro.geocenter.max_lng))};n.geocoder.geocode(r,(function(e,r){return r==google.maps.GeocoderStatus.OK?(t(e),e):r==google.maps.GeocoderStatus.ZERO_RESULTS?(GeoLoc.map_view&&spin_end(),r):r}))},set_recurrence(e){e?(a.recurrence=!0,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","1")):(a.recurrence=!1,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","0"))}}),r.extend(tribe_ev.tests,{hide_recurrence:()=>!!r("#tribeHideRecurrence:checked").length}),r((function(){r(".tribe-bar-geoloc-filter").length&&r(".tribe-bar-geoloc-filter").append('<div id="tribe-geo-options"><div id="tribe-geo-links"></div></div>');let c=r("#tribe-events"),g=r("#tribe-bar-geoloc"),d=r("#tribe-geo-options"),b=!1;i.pro_tooltips(),s.hide_recurrence()&&i.set_recurrence(!0),a.recurrence=s.hide_recurrence(),c.on("click","#tribeHideRecurrence",(function(){a.popping=!1,a.do_string=!0,a.paged=1,b=!!r(this).is(":checked"),i.set_recurrence(b),r(o).trigger("tribe_ev_updatingRecurrence").trigger("tribe_ev_runAjax"),r(o).trigger("updating-recurrence.tribe").trigger("run-ajax.tribe")})),r(o).on("pre-collect-bar-params.tribe",(function(){g.length&&(g.val().length?"map"===a.view_target&&(a.url_params.action="tribe_geosearch"):r("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val("")),tribe_storage&&"1"===tribe_storage.getItem("tribeHideRecurrence")&&"month"!==a.view_target&&"week"!==a.view_target&&(a.url_params.tribeHideRecurrence="1")})),s.map_view()||(d.length&&(c.on("click",".tribe-geo-option-link",(function(e){e.preventDefault(),e.stopPropagation();const t=r(this);r(".tribe-geo-option-link").removeClass("tribe-option-loaded"),t.addClass("tribe-option-loaded"),g.val(t.text()),r("#tribe-bar-geoloc-lat").val(n.geocodes[t.data("index")].geometry.location.lat()),r("#tribe-bar-geoloc-lng").val(n.geocodes[t.data("index")].geometry.location.lng()),i.pre_ajax((function(){r(o).trigger("tribe_ev_runAjax"),r(o).trigger("run-ajax.tribe"),d.hide()}))})),r(t).on("click",(function(e){d.hide()}))),i.snap("#tribe-geo-wrapper","#tribe-geo-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a")),r("#wp-toolbar").on("click",".tribe-split-single a, .tribe-split-all a",(function(){let t="";if(t=r(this).parent().hasClass("tribe-split-all")?TribeEventsPro.recurrence.splitAllMessage:TribeEventsPro.recurrence.splitSingleMessage,!e.confirm(t))return!1}));const p=1===c.data("recurrence-list");p&&r(o).on("tribe_ev_ajaxStart",(function(){"string"==typeof a.params&&(a.params=decodeURIComponent(a.params.replace(/\+/g,"%20")).split("&").map((function(e){return e.split("=")})).filter((function(e){return 2===e.length})).reduce((function(e,t){return e[t[0]]?(e[t[0]].push||(e[t[0]]=[e[t[0]]]),e[t[0]].push(t[1])):e[t[0]]=t[1],e}),{})),a.params.is_recurrence_list=p;const e=c.data("tribe_post_parent");e&&(a.params.tribe_post_parent=e),a.params=r.param(a.params)})),l&&tec_debug.info("TEC Debug: tribe-events-pro.js successfully loaded")}))}(window,document,jQuery,tribe_ev.events,tribe_ev.fn,tribe_ev.geoloc,tribe_ev.state,tribe_ev.tests,tribe_debug),window.tec=window.tec||{},window.tec.eventsPro=window.tec.eventsPro||{},window.tec.eventsPro.tribeEventsPro={};