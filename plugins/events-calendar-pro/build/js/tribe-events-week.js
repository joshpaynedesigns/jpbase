!function(e,t,r,i,a,n,s,o,l,d){r((function(){let c=r("body"),u=r("#tribe-bar-date"),p=r("#tribe-events"),b=r("#tribe-events-bar"),_=r("#tribe-events-header"),g=0,h=!1,m=r(".column.tribe-week-grid-hours div:first-child"),v="/";void 0!==l.events_base&&(v=r("#tribe-events-header").data("baseurl")),i.default_permalinks&&(v=v.split("?")[0]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){const t=this.length>>>0;let r=Number(arguments[1])||0;for(r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1}),_.length&&(g=_.data("startofweek")),b.addClass("tribe-has-datepicker");let f=_.data("date");"0"!==s.datepicker_format&&(f=tribeDateFormat(f,"tribeQuery")),s.date=f;const w=[0,1,2,3,4,5,6],y=w.indexOf(g);y>-1&&w.splice(y,1);let k="yyyy-mm-dd";if("0"!==s.datepicker_format){k=i.datepicker_formats.main[s.datepicker_format];const e=n.get_url_param("tribe-bar-date");e&&u.val(tribeDateFormat(e,s.datepicker_format))}function x(){const e=r("#tribe-events-content > .tribe-events-grid");c.is(".tribe-mobile")?function(e){const t=r(".tribe-events-mobile-day");r("#tribe-mobile-container").length||r('<div id="tribe-mobile-container" />').insertAfter(e),e.hide(),t.each((function(){const e=r(this).attr("title");!function(e,t){const i=r("#tribe-mobile-container");let a=r('.tribe-mobile-day[data-day="'+e+'"]');a.length?a.show():(i.append('<div class="tribe-mobile-day" data-day="'+e+'"></div>'),function(e){const t=r('.tribe-mobile-day[data-day="'+e+'"]'),i=r('.column[title="'+e+'"] .tribe-week-event');i.length&&i.each((function(){const e=r(this);if(e.tribe_has_attr("data-tribejson")){const r=e.data("tribejson");t.append(tribe_tmpl("tribe_tmpl_week_mobile",r))}}))}(e)),a.length||(a=r('.tribe-mobile-day[data-day="'+e+'"]')),!a.find("h5").length&&a.find(".tribe-events-mobile").length&&a.prepend('<h5 class="tribe-mobile-day-date">'+t+"</h5>")}(e,r('.tribe-grid-content-wrap .column[title="'+e+'"]').find("span").attr("data-full-date"))}))}(e):(e.show(),r(".tribe-event-placeholder").each((function(){const e=r(this).attr("data-event-id"),t=parseInt(r("#tribe-events-event-"+e).outerHeight());r(this).height(t)})),function(){const e=r(".tribe-grid-allday"),t=e.find(".vevent"),i=parseInt(r(".tribe-grid-content-wrap .column").width())-8;for(let r=1;r<8;r++)t.hasClass("tribe-dayspan"+r)&&e.find(".tribe-dayspan"+r).children("div").css("width",i*r+(4*(2*r-2)+(r-1))+"px")}(),(r(".tribe-week-grid-wrapper .tribe-grid-body .column").length>6?r(".tribe-grid-body .column:eq(5), .tribe-grid-body .column:eq(6), .tribe-grid-body .column:eq(7)"):r(".tribe-grid-body .column:eq(4), .tribe-grid-body .column:eq(5)")).addClass("tribe-events-right"),function(){const e=r(".tribe-grid-body .tribe-grid-content-wrap .column > div[id*='tribe-events-event-']"),t=r(".tribe-week-grid-inner-wrap").height();let i=5e3;e.each((function(){let e=r(this),a=e.find("a"),n=e.attr("data-hour"),s=e.attr("data-duration"),o=e.attr("data-min");const l=r('.tribe-week-grid-block[data-hour="'+n+'"]');let d=0;l.get(0)&&(d=l.offset().top-l.parent().offset().top-l.parent().scrollTop()),d=parseInt(Math.round(d))+parseInt(o);const c=parseInt(t)-parseInt(s)-parseInt(d);0>c&&(s=s+c-14);let u,p=a.css("height","auto").height()+5;u=p>s?p:s-16;const b=u+16,_={height:u+"px"};d<i&&(i=d,m=e),e.css({height:b+"px",top:d+"px"}),a.css(_).parent().css(_)})),e.length||(m=r(".column.tribe-week-grid-hours div:first-child")),r(".tribe-week-grid-wrapper.tribe-scroller").nanoScroller({paneClass:"scroller-pane",sliderClass:"scroller-slider",contentClass:"scroller-content",iOSNativeScrolling:!0,alwaysVisible:!1,scrollTo:m}),function(){const e=r(".tribe-grid-body .tribe-events-mobile-day.column"),t=100/e.length;e.css("width",t+"%"),r(".tribe-grid-header .tribe-grid-content-wrap .column").css("width",t+"%"),r(".tribe-grid-allday .tribe-grid-content-wrap .column").css("width",t+"%")}(),r("div[id^='tribe-events-event-']").css({visibility:"visible",opacity:"0"}).delay(500).animate({opacity:"1"},{duration:250}),function(e){e.each((function(){const e=r(this),t=e.next(),i={left:"0",width:"65%"},a={right:"0",width:"65%"};if(t.length){const r=t.offset(),n=[r.left,r.left+t.outerWidth()],s=[r.top,r.top+t.outerHeight()],o=e.offset(),l=[o.left,o.left+e.outerWidth()],d=[o.top,o.top+e.outerHeight()];n[0]<l[1]&&n[1]>l[0]&&s[0]<d[1]&&s[1]>d[0]&&(e.is(".overlap-right")?t.css(i).addClass("overlap-left"):(e.is(".overlap-left")||e.css(i),t.css(a).addClass("overlap-right")))}}))}(e),tribe_ev.fn.equal_height(r(".tribe-grid-header .tribe-grid-content-wrap .column")),tribe_ev.fn.equal_height(r(".tribe-grid-allday .column")),setTimeout((function(){const e=r(".tribe-grid-body").height();r(".tribe-grid-body .tribe-grid-content-wrap .column").height(e)}),250)}())}if(i.datepicker_opts={format:k,weekStart:g,daysOfWeekDisabled:w,autoclose:!0},tribe_ev.fn.ensure_datepicker_i18n(),u.bootstrapDatepicker(i.datepicker_opts).on("changeDate",(function(e){if(s.updating_picker)return;const t=s.datepicker_format.toString();s.date=tribeUtils.formatDateWithMoment(e.date,"tribeQuery",t),h=!0,(o.no_bar()||o.live_ajax()&&o.pushstate)&&(o.reset_on()||j(e,s.date))})),x(),r(a).on("resize-complete.tribe",(function(){x()})),o.pushstate&&!o.map_view()){let a="action=tribe_week&eventDate="+s.date;i.params.length&&(a=a+"&"+i.params),s.category&&(a=a+"&tribe_event_category="+s.category),n.is_featured()&&(a+="&featured=1"),r(t.getElementById("tribe-events")).is(".tribe-events-shortcode")&&!1===l.update_urls.shortcode.week||history.replaceState({tribe_params:a,tribe_url_params:i.params},"",location.href),r(e).on("popstate",(function(e){const t=e.originalEvent.state;t&&(s.do_string=!1,s.pushstate=!1,s.popping=!0,s.params=t.tribe_params,s.url_params=t.tribe_url_params,n.pre_ajax((function(){D()})),n.set_form(s.params))}))}function j(e,t){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),s.ajax_running)return;const a=r("#tribe-bar-date");if(s.popping=!1,t)s.date=t,i.cur_url=v+s.date+"/";else if(a.length&&""!==a.val()){const e=s.datepicker_format.toString();"0"!==s.datepicker_format?s.date=tribeUtils.formatDateWithMoment(a.bootstrapDatepicker("getDate"),"tribeQuery",e):s.date=a.val(),i.cur_url=v+s.date+"/"}else h?i.cur_url=v+s.date+"/":(s.date=i.cur_date,i.cur_url=v+i.cur_date+"/");n.pre_ajax((function(){D()}))}}function D(){if(n.invalid_date(s.date))return;r(".tribe-events-grid").tribe_spin(),s.pushcount=0,s.ajax_running=!0,s.popping||(s.filter_cats&&(i.cur_url=v),s.params={action:"tribe_week",eventDate:s.date,tribe_event_display:s.view,featured:n.is_featured()},s.url_params={},i.default_permalinks&&(s.url_params.hasOwnProperty("eventDate")||(s.url_params.eventDate=s.date),s.url_params.hasOwnProperty("post_type")||(s.url_params.post_type=l.events_post_type),s.url_params.hasOwnProperty("eventDisplay")||(s.url_params.eventDisplay=s.view)),s.url_params.hasOwnProperty("tribe_event_display")||(s.url_params.tribe_event_display=s.view),s.category&&(s.params.tribe_event_category=s.category),r(a).trigger("tribe_ev_serializeBar"),r(a).trigger("serialize-bar.tribe"),s.params=r.param(s.params),s.url_params=r.param(s.url_params),r(a).trigger("tribe_ev_collectParams"),r(a).trigger("collect-params.tribe"),s.pushstate=!0,s.do_string=!1,(0<s.pushcount||s.filters||i.default_permalinks)&&(s.pushstate=!1,s.do_string=!0));let c=!1;o.pushstate?(d&&tec_debug.time("Week View Ajax Timer"),r(a).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_weekView_AjaxStart"),r(a).trigger("ajax-start.tribe").trigger("week-view-ajax-start.tribe"),r.post(TribeWeek.ajaxurl,s.params,(function(e){if(s.initial_load=!1,n.enable_inputs("#tribe_events_filters_form","input, select"),!e.success)return;s.ajax_running=!1,i.ajax_response={total_count:"",view:e.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()},i.cur_url=n.get_base_url();const o=r.parseHTML(e.html);r("#tribe-events-content.tribe-events-week-grid").replaceWith(o),x(),r("div[id*='tribe-events-event-']").hide().fadeIn("fast"),s.page_title=r("#tribe-events-header").data("title"),s.view_title=r("#tribe-events-header").data("viewtitle"),s.page_title&&(t.title=s.page_title),r(".tribe-events-page-title").html(s.view_title),(r("#tribe-events.tribe-events-shortcode").length||s.do_string)&&(-1!==i.cur_url.indexOf("?")&&(i.cur_url=i.cur_url.split("?")[0]),i.cur_url=i.cur_url+"?"+s.url_params,c=!0);const u=!r(t.getElementById("tribe-events")).is(".tribe-events-shortcode")||!1!==l.update_urls.shortcode.week;s.do_string&&u&&history.pushState({tribe_url_params:s.url_params,tribe_params:s.params},s.page_title,c?i.cur_url:i.cur_url+"?"+s.url_params),s.pushstate&&u&&history.pushState({tribe_url_params:s.url_params,tribe_params:s.params},s.page_title,c?i.cur_url:i.cur_url+"?"+s.url_params),r(a).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_weekView_AjaxSuccess"),r(a).trigger("ajax-success.tribe").trigger("week-view-ajax-success.tribe"),d&&tec_debug.timeEnd("Week View Ajax Timer")}))):s.url_params.length?e.location=c?i.cur_url:i.cur_url+"?"+s.url_params:e.location=i.cur_url}p.on("click",".tribe-events-nav-previous, .tribe-events-nav-next",(function(e){if(e.preventDefault(),s.ajax_running)return;const t=r(this).find("a");s.popping=!1,s.date=t.attr("data-week"),n.update_base_url(t.attr("href")),n.update_picker(s.date),n.pre_ajax((function(){D()}))})),r("form#tribe-bar-form").on("submit",(function(e){j(e,null)})),n.snap("#tribe-events-content","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),r(a).on("run-ajax.tribe",(function(){D()})),r(".tribe-week-event a.url").on("click touchend",(function(t){const i=r(this).attr("href");e.location=i})),d&&tec_debug.info("TEC Debug: tribe-events-week.js successfully loaded"),s.view&&d&&tec_debug.timeEnd("Tribe JS Init Timer")}))}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug),window.tec=window.tec||{},window.tec.eventsPro=window.tec.eventsPro||{},window.tec.eventsPro.tribeEventsWeek={};